<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mergington High School Activities</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <h1>Mergington High School</h1>
      <h2>Extracurricular Activities</h2>
    </header>

    <main>
      <section id="activities-container">
        <h3>Available Activities</h3>
        <div id="activities-list">
          <!-- Activities will be loaded here -->
          <p>Loading activities...</p>
        </div>
      </section>

      <section id="signup-container">
        <h3>Sign Up for an Activity</h3>
        <form id="signup-form">
          <div class="form-group">
            <label for="email">Student Email:</label>
            <input type="email" id="email" required placeholder="your-email@mergington.edu" />
          </div>
          <div class="form-group">
            <label for="activity">Select Activity:</label>
            <select id="activity" required>
              <option value="">-- Select an activity --</option>
              <!-- Activity options will be loaded here -->
            </select>
          </div>
          <button type="submit">Sign Up</button>
        </form>
        <div id="message" class="hidden"></div>
      </section>
    </main>

    <footer>
      <p>&copy; 2023 Mergington High School</p>
    </footer>

    <script src="app.js"></script>

    <script>
      // Assuming activities is the array of activity objects fetched from the API
      function displayActivities(activities) {
        const activitiesList = document.getElementById('activities-list');
        activitiesList.innerHTML = ''; // Clear loading text

        activities.forEach(activity => {
          const { name, description, schedule, participants, max_participants } = activity;

          const activityCard = document.createElement('div');
          activityCard.classList.add('activity-card');

          activityCard.innerHTML = `
            <h4>${name}</h4>
            <p>${description}</p>
            <p class="schedule"><strong>Schedule:</strong> ${schedule}</p>
            <p class="capacity"><strong>Capacity:</strong> ${participants.length}/${max_participants}</p>
            <div class="participants-section">
                <strong>Current Participants:</strong>
                <ul class="participants-list">
                    ${participants.map(email => `<li>${email}</li>`).join('')}
                </ul>
            </div>
            <button class="signup-btn" onclick="signupForActivity('${name}')">Sign Up</button>
          `;

          activitiesList.appendChild(activityCard);
        });
      }

      // Mock function to simulate signup
      function signupForActivity(activityName) {
        const email = document.getElementById('email').value;
        const messageDiv = document.getElementById('message');

        // Simulate API call
        setTimeout(() => {
          messageDiv.classList.remove('hidden');
          messageDiv.textContent = `Successfully signed up ${email} for ${activityName}!`;
        }, 500);
      }

      // Simulate fetching activities from API
      setTimeout(() => {
        const mockActivities = [
          {
            name: 'Basketball',
            description: 'Join the school basketball team.',
            schedule: 'Mon, Wed, Fri 4-6 PM',
            participants: ['john.doe@mergington.edu', 'jane.smith@mergington.edu'],
            max_participants: 15
          },
          {
            name: 'Drama Club',
            description: 'Participate in school plays and drama activities.',
            schedule: 'Tue, Thu 3-5 PM',
            participants: ['mary.jane@mergington.edu'],
            max_participants: 10
          }
        ];

        displayActivities(mockActivities);
      }, 1000);
    </script>
  </body>
</html>
